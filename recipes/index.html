<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Recipes — Create Figma Plugin</title><meta name="description"content="The comprehensive toolkit for developing plugins and widgets for Figma and FigJam"><meta name="twitter:card"content="summary_large_image"><meta name="twitter:description"content="The comprehensive toolkit for developing plugins and widgets for Figma and FigJam"><meta name="twitter:image"content="https://yuanqing.github.io/create-figma-plugin/media/share-recipes.png"><meta name="twitter:title"content="Recipes — Create Figma Plugin"><meta name="viewport"content="width=device-width,initial-scale=1"><meta property="og:description"content="The comprehensive toolkit for developing plugins and widgets for Figma and FigJam"><meta property="og:image"content="https://yuanqing.github.io/create-figma-plugin/media/share-recipes.png"><meta property="og:title"content="Recipes — Create Figma Plugin"><link href="/create-figma-plugin/style.css"rel="stylesheet"><link rel="icon"href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cstyle%3E circle %7B fill: %23000; %7D @media (prefers-color-scheme: dark) %7B circle %7B fill: %23fff; %7D %7D %3C/style%3E%3Ccircle cx='50' cy='50' r='50' /%3E%3C/svg%3E%0A"></head><body class="page"><div class="page__skip-to-content"><a href="#content">Skip to content</a></div><header class="page__header"><h1 class="title"><a href="/create-figma-plugin/">Create Figma Plugin</a></h1><button class="menu-toggle-button"aria-expanded="false"><div class="menu-toggle-button__inner">Toggle menu</div><svg fill="none"viewBox="0 0 20 20"class="menu-toggle-button__svg-menu"><path fill-rule="evenodd"d="M0 3.25h20v1.5H0v-1.5Zm0 6h20v1.5H0v-1.5Zm20 6H0v1.5h20v-1.5Z"clip-rule="evenodd"/></svg> <svg fill="none"viewBox="0 0 20 20"class="menu-toggle-button__svg-close"><path fill-rule="evenodd"d="M10 11.0607L16.4697 17.5303L17.5303 16.4697L11.0607 10L17.5303 3.53033L16.4697 2.46967L10 8.93934L3.53033 2.46967L2.46967 3.53033L8.93934 10L2.46967 16.4697L3.53033 17.5303L10 11.0607Z"clip-rule="evenodd"/></svg></button><nav class="menu"><ul><li><a href="/create-figma-plugin/">Introduction</a></li><li><a href="/create-figma-plugin/quick-start/">Quick start</a></li><li><a href="/create-figma-plugin/configuration/">Configuration</a></li><li><a href="/create-figma-plugin/ui/">UI</a></li><li><a href="/create-figma-plugin/utilities/">Utilities</a></li><li><a href="/create-figma-plugin/recipes/"class="menu__active">Recipes</a><div class="menu__toc"><h2 class="menu__toc-header">On this page</h2><ul><li><a href="#passing-data-between-the-plugin-widgets-main-and-ui-contexts">Passing data between the plugin/widget’s main and UI contexts</a></li><li><a href="#specifying-multiple-commands-in-the-plugin-sub-menu">Specifying multiple commands in the plugin sub-menu</a></li><li><a href="#configuring-relaunch-buttons">Configuring relaunch buttons</a></li><li><a href="#using-image-assets-in-your-plugin-widget-ui">Using image assets in your plugin/widget UI</a></li><li><a href="#making-the-plugin-widget-ui-window-resizable">Making the plugin/widget UI window resizable</a></li><li><a href="#customizing-the-build">Customizing the build</a><ul><li><a href="#customizing-the-underlying-esbuild-configuration">Customizing the underlying esbuild configuration</a><ul><li><a href="#disabling-automatic-swapping-of-react-imports">Disabling automatic swapping of React imports</a></li></ul></li><li><a href="#customizing-the-manifest-json-file">Customizing the <code>manifest.json</code> file</a></li></ul></li></ul></div></li><li><a href="/create-figma-plugin/reference-plugins-and-widgets/">Reference plugins/widgets</a></li></ul><ul><li><a href="/create-figma-plugin/storybook/"target="_blank">Storybook</a></li><li><a href="https://github.com/yuanqing/create-figma-plugin/blob/main/CHANGELOG.md#readme"target="_blank">Changelog</a></li><li><a href="https://github.com/yuanqing/create-figma-plugin"target="_blank">GitHub</a></li><li><a href="https://twitter.com/yuanqinglim"target="_blank">@yuanqinglim</a></li></ul><ul><li><a href="https://figma.com/plugin-docs/"target="_blank">Plugin API docs</a></li><li><a href="https://figma.com/widget-docs/"target="_blank">Widget API docs</a></li></ul><div class="menu__version">v2.3.0-alpha.0</div></nav></header><main role="main"class="page__main"><div class="page__main-inner"><div class="content"id="content"><h1>Recipes</h1><h2 id="passing-data-between-the-plugin-widgets-main-and-ui-contexts">Passing data between the plugin/widget’s main and UI contexts<a aria-hidden class="header-link"tabindex="-1"href="#passing-data-between-the-plugin-widgets-main-and-ui-contexts">#</a></h2><p>The <a href="/create-figma-plugin/utilities/"><code>@create-figma-plugin/utilities</code></a> library includes 3 functions to facilitate data passing (in both directions) between the plugin/widget’s <a href="https://figma.com/plugin-docs/how-plugins-run/"target="_blank">main and UI contexts</a>:</p><ul><li><a href="/create-figma-plugin/utilities/#onhandlername-handler"><code>on(name, handler)</code></a> — Registers an event <code>handler</code> for the given event <code>name</code>.</li><li><a href="/create-figma-plugin/utilities/#oncehandlername-handler"><code>once(name, handler)</code></a> — Ditto <code>on</code>, only that <code>handler</code> will run at most once.</li><li><a href="/create-figma-plugin/utilities/#emithandlername-args"><code>emit(name, ...args)</code></a> — Calling <code>emit</code> in the main context invokes the event handler for the matching event <code>name</code> in your UI. Correspondingly, calling <code>emit</code> in your UI invokes the event handler for the matching event <code>name</code> in the main context. All <code>args</code> passed after <code>name</code> will be directly <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"target="_blank">applied</a> on the event handler.</li></ul><p>Consider a toy Figma plugin:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#8b949e">// src/main.ts</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  once,</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">} </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/utilities'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">function</span><span style="color:#ffa657"> () </span><span style="color:#c9d1d9">{</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">handleSubmit</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">data</span><span style="color:#c9d1d9">) {</span></span>
<span class="line"><span style="color:#c9d1d9">    console.</span><span style="color:#d2a8ff">log</span><span style="color:#c9d1d9">(data) </span><span style="color:#8b949e">//=> { greeting: 'Hello, World!' }</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#d2a8ff">once</span><span style="color:#c9d1d9">(</span><span style="color:#a5d6ff">'SUBMIT'</span><span style="color:#c9d1d9">, handleSubmit)</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre data-language="tsx"data-theme="default"><code data-language="tsx"data-theme="default"><span class="line"><span style="color:#8b949e">// src/ui.tsx</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { render, Button } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/ui'</span></span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  emit,</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">} </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/utilities'</span></span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { h } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'preact'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">Plugin</span><span style="color:#c9d1d9"> () {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">handleClick</span><span style="color:#c9d1d9"> () {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">data</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">=</span><span style="color:#c9d1d9"> { greeting: </span><span style="color:#a5d6ff">'Hello, World!'</span><span style="color:#c9d1d9"> }</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#d2a8ff">emit</span><span style="color:#c9d1d9">(</span><span style="color:#a5d6ff">'SUBMIT'</span><span style="color:#c9d1d9">, data)</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> (</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">    &#x3C;</span><span style="color:#7ee787">Button</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">onClick</span><span style="color:#ff7b72">={</span><span style="color:#c9d1d9">handleClick</span><span style="color:#ff7b72">}</span><span style="color:#c9d1d9">>Submit&#x3C;/</span><span style="color:#7ee787">Button</span><span style="color:#c9d1d9">></span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  )</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#d2a8ff">render</span><span style="color:#ffa657">(</span><span style="color:#c9d1d9">Plugin</span><span style="color:#ffa657">)</span></span></code></pre></div><p>See that:</p><ul><li>In the main context, we’re using <code>once</code> to register the <code>handleSubmit</code> event handler for the event name <strong><code>SUBMIT</code></strong>.</li><li>In the UI context, we’re using <code>emit</code> to trigger the event handler in the main context for the event name <strong><code>SUBMIT</code></strong>.</li><li>In the main context, the <code>data</code> received by the <code>handleSubmit</code> event handler is precisely the <code>data</code> object that was passed to <code>emit</code> in the UI context.</li></ul><h2 id="specifying-multiple-commands-in-the-plugin-sub-menu">Specifying multiple commands in the plugin sub-menu<a aria-hidden class="header-link"tabindex="-1"href="#specifying-multiple-commands-in-the-plugin-sub-menu">#</a></h2><p><em>This is applicable to plugins only.</em></p><p>Menu commands are specified on the <a href="/create-figma-plugin/configuration/#menu"><strong><code>"menu"</code></strong></a> key under <strong><code>"figma-plugin"</code></strong>:</p><div data-rehype-pretty-code-fragment=""><pre data-language="json"data-theme="default"><code data-language="json"data-theme="default"><span class="line"><span style="color:#c9d1d9">{</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#7ee787">"figma-plugin"</span><span style="color:#c9d1d9">: {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"id"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"837846252158418235"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Flatten Selection to Bitmap"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"menu"</span><span style="color:#c9d1d9">: [</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        {</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Flatten Selection to Bitmap"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"main"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/flatten-selection-to-bitmap/main.ts"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"ui"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/flatten-selection-to-bitmap/ui.ts"</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        },</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        </span><span style="color:#a5d6ff">"-"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        {</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Settings"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"main"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/settings/main.ts"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          </span><span style="color:#7ee787">"parameters"</span><span style="color:#c9d1d9">: [</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">            {</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">              </span><span style="color:#7ee787">"key"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"resolution"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">              </span><span style="color:#7ee787">"description"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Enter a bitmap resolution"</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">            }</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">          ]</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        }</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">      ]</span></span>
<span class="line"><span style="color:#c9d1d9">    }</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p>See that:</p><ul><li><strong><code>"Flatten Selection to Bitmap"</code></strong> and <strong><code>"Settings"</code></strong> are the two commands in the plugin sub-menu.</li><li>The <strong><code>"Flatten Selection to Bitmap"</code></strong> command has a UI implementation.</li><li><strong><code>"Settings"</code></strong> is a <a href="https://figma.com/plugin-docs/plugin-parameters/"target="_blank">parameter command</a> that receives a single <code>resolution</code> parameter via the Quick Actions search bar.</li><li>A <strong><code>"-"</code></strong> is used to specify a separator between the two commands in the plugin sub-menu.</li></ul><p>The above configuration would result in the following:</p><p><img src="/create-figma-plugin/media/multiple-commands.png"alt="“Flatten Selection to Bitmap” plugin sub-menu"></p><p>See the other <a href="/create-figma-plugin/configuration/#configuration-options">configuration options</a>.</p><h2 id="configuring-relaunch-buttons">Configuring relaunch buttons<a aria-hidden class="header-link"tabindex="-1"href="#configuring-relaunch-buttons">#</a></h2><p><em>Relaunch buttons are applicable to Figma plugins only.</em></p><p><a href="https://figma.com/plugin-docs/api/properties/nodes-setrelaunchdata/"target="_blank">Relaunch buttons</a> are configured on the <a href="/create-figma-plugin/configuration/#relaunchbuttons"><strong><code>"relaunchButtons"</code></strong></a> key under <strong><code>"figma-plugin"</code></strong>:</p><div data-rehype-pretty-code-fragment=""><pre data-language="json"data-theme="default"><code data-language="json"data-theme="default"><span class="line"><span style="color:#c9d1d9">{</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#7ee787">"figma-plugin"</span><span style="color:#c9d1d9">: {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"id"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"786286754606650597"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Organize Layers"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"menu"</span><span style="color:#c9d1d9">: [</span></span>
<span class="line"><span style="color:#c9d1d9">      {</span></span>
<span class="line"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Organize Layers"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"main"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/organize-layers/main.ts"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"ui"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/organize-layers/ui.tsx"</span></span>
<span class="line"><span style="color:#c9d1d9">      },</span></span>
<span class="line"><span style="color:#c9d1d9">      </span><span style="color:#a5d6ff">"-"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">      {</span></span>
<span class="line"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Reset Plugin"</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"main"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/reset-plugin/main.ts"</span></span>
<span class="line"><span style="color:#c9d1d9">      }</span></span>
<span class="line"><span style="color:#c9d1d9">    ],</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">    </span><span style="color:#7ee787">"relaunchButtons"</span><span style="color:#c9d1d9">: {</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">      </span><span style="color:#7ee787">"organizeLayers"</span><span style="color:#c9d1d9">: {</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"name"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"Organize Layers"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"main"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/organize-layers/main.ts"</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">        </span><span style="color:#7ee787">"ui"</span><span style="color:#c9d1d9">: </span><span style="color:#a5d6ff">"src/organize-layers/ui.tsx"</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">      }</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">    }</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p>See that:</p><ul><li><strong><code>"organizeLayers"</code></strong> is the <code>relaunchButtonId</code>.</li><li>The object corresponding to <strong><code>"organizeLayers"</code></strong> specifies the command that runs when the relaunch button is clicked.</li></ul><p>Then, call <a href="/create-figma-plugin/utilities/#setrelaunchbuttonnode-relaunchbuttonid--options"><code>setRelaunchButton</code></a> in our plugin command’s main entry point:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#8b949e">// src/organize-layers/main.js</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  setRelaunchButton,</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">} </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/utilities'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">async</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">function</span><span style="color:#ffa657"> () </span><span style="color:#c9d1d9">{</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#d2a8ff">setRelaunchButton</span><span style="color:#c9d1d9">(figma.currentPage, </span><span style="color:#a5d6ff">'organizeLayers'</span><span style="color:#c9d1d9">)</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p>The second argument passed to <code>setRelaunchButton</code> must be a particular <code>relaunchButtonId</code> as configured on the <strong><code>"relaunchButtons"</code></strong> key of our <code>package.json</code>. In the above example, we’re associating <code>figma.currentPage</code> with the <code>organizeLayers</code> relaunch button command.</p><p>This would result in the following:</p><p><img src="/create-figma-plugin/media/relaunch-button.png"alt="“Organize Layers” relaunch button"></p><p>To show additional text below the relaunch button, pass a third argument to <code>setRelaunchButton</code>:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#d2a8ff">setRelaunchButton</span><span style="color:#c9d1d9">(</span></span>
<span class="line"><span style="color:#c9d1d9">  figma.currentPage,</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#a5d6ff">'organizeLayers'</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">  { description: </span><span style="color:#a5d6ff">'Organizes all layers on the page based on layer name'</span><span style="color:#c9d1d9"> }</span></span>
<span class="line"><span style="color:#c9d1d9">)</span></span></code></pre></div><h2 id="using-image-assets-in-your-plugin-widget-ui">Using image assets in your plugin/widget UI<a aria-hidden class="header-link"tabindex="-1"href="#using-image-assets-in-your-plugin-widget-ui">#</a></h2><p>Image assets used in your plugin/widget UI must be “inlined” into the UI bundle. Consider the following example where a PNG image is used in the UI:</p><div data-rehype-pretty-code-fragment=""><pre data-language="tsx"data-theme="default"><code data-language="tsx"data-theme="default"><span class="line"><span style="color:#8b949e">// src/ui.tsx</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { render } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/ui'</span></span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { h } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'preact'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> image </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'./image.png'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">Plugin</span><span style="color:#c9d1d9"> () {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> (</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">    &#x3C;</span><span style="color:#7ee787">img</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">src</span><span style="color:#ff7b72">={</span><span style="color:#c9d1d9">image</span><span style="color:#ff7b72">}</span><span style="color:#c9d1d9"> /></span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  )</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#d2a8ff">render</span><span style="color:#ffa657">(</span><span style="color:#c9d1d9">Plugin</span><span style="color:#ffa657">)</span></span></code></pre></div><p>Note that <code>image</code> is a <a href="https://esbuild.github.io/content-types/#data-url"target="_blank">Base64-encoded data URL</a> string of the imported <code>image.png</code> file, so it is set as the <code>src</code> attribute of the <code>img</code> HTML element.</p><p>If you’re writing your plugin/widget in TypeScript, you’ll also need to add a <code>.d.ts</code> typings file to your project’s <code>src</code> directory containing the following:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#8b949e">// src/image-assets.d.ts</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">declare</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">module</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'*.gif'</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">content</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">string</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#c9d1d9">content</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"><span style="color:#ff7b72">declare</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">module</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'*.jpg'</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">content</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">string</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#c9d1d9">content</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"><span style="color:#ff7b72">declare</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">module</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'*.png'</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">content</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">string</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#c9d1d9">content</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"><span style="color:#ff7b72">declare</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">module</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'*.svg'</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">content</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">string</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#c9d1d9">content</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><h2 id="making-the-plugin-widget-ui-window-resizable">Making the plugin/widget UI window resizable<a aria-hidden class="header-link"tabindex="-1"href="#making-the-plugin-widget-ui-window-resizable">#</a></h2><p>The plugin/widget UI window is <em>not</em> resizable by default; this must be implemented by the plugin/widget itself. In practice, this involves:</p><ol><li>Listening to click-and-drag events in the UI window, and calculating an updated window size based on the mouse position.</li><li>Calling <a href="https://figma.com/plugin-docs/api/figma-ui/#resize"target="_blank"><code>figma.ui.resize</code></a> with the updated window size.</li></ol><p><a href="/create-figma-plugin/ui/#using-the-preact-component-library"><code>@create-figma-plugin/ui</code></a> includes a <code>useWindowResize</code> hook that makes it easier to implement a resizable UI window:</p><div data-rehype-pretty-code-fragment=""><pre data-language="tsx"data-theme="default"><code data-language="tsx"data-theme="default"><span class="line"><span style="color:#8b949e">// src/ui.tsx</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { render, useWindowResize } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/ui'</span></span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { emit } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/utilities'</span></span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { h } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'preact'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">Plugin</span><span style="color:#c9d1d9"> () {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> </span><span style="color:#d2a8ff">onWindowResize</span><span style="color:#c9d1d9">(</span><span style="color:#ffa657">windowSize</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> { </span><span style="color:#ffa657">width</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">number</span><span style="color:#c9d1d9">; </span><span style="color:#ffa657">height</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">number</span><span style="color:#c9d1d9"> }) {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#d2a8ff">emit</span><span style="color:#c9d1d9">(</span><span style="color:#a5d6ff">'RESIZE_WINDOW'</span><span style="color:#c9d1d9">, windowSize)</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#d2a8ff">useWindowResize</span><span style="color:#c9d1d9">(onWindowResize, {</span></span>
<span class="line"><span style="color:#c9d1d9">    minWidth: </span><span style="color:#79c0ff">120</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    minHeight: </span><span style="color:#79c0ff">120</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    maxWidth: </span><span style="color:#79c0ff">320</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    maxHeight: </span><span style="color:#79c0ff">320</span></span>
<span class="line"><span style="color:#c9d1d9">  })</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#d2a8ff">render</span><span style="color:#ffa657">(</span><span style="color:#c9d1d9">Plugin</span><span style="color:#ffa657">)</span></span></code></pre></div><p>The hook takes two arguments:</p><ul><li>The first argument is an <code>onWindowResize</code> callback that will be invoked with the updated <code>windowSize</code> in response to click-and-drag events on the bottom and right edges of the UI window. Within this callback, we <code>emit</code> the <strong><code>RESIZE_WINDOW</code></strong> event, and pass along the updated <code>windowSize</code>.</li><li>The second argument is an optional configuration object where we can set a minimum and maximum size for the resizable UI window.</li></ul><p>In the <a href="https://figma.com/plugin-docs/how-plugins-run/"target="_blank">main context</a>, we register a handler for the <strong><code>RESIZE_WINDOW</code></strong> event, and invoke <a href="https://figma.com/plugin-docs/api/figma-ui/#resize"target="_blank"><code>figma.ui.resize</code></a> with the new window size:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#8b949e">// src/main.ts</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">import</span><span style="color:#c9d1d9"> { on, showUI } </span><span style="color:#ff7b72">from</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'@create-figma-plugin/utilities'</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#ff7b72">export</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">default</span><span style="color:#ffa657"> </span><span style="color:#ff7b72">function</span><span style="color:#ffa657"> () </span><span style="color:#c9d1d9">{</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#d2a8ff">on</span><span style="color:#c9d1d9">(</span><span style="color:#a5d6ff">'RESIZE_WINDOW'</span><span style="color:#c9d1d9">, </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">windowSize</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> { </span><span style="color:#ffa657">width</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">number</span><span style="color:#c9d1d9">; </span><span style="color:#ffa657">height</span><span style="color:#ff7b72">:</span><span style="color:#c9d1d9"> </span><span style="color:#79c0ff">number</span><span style="color:#c9d1d9"> }) {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#ff7b72">const</span><span style="color:#c9d1d9"> { </span><span style="color:#79c0ff">width</span><span style="color:#c9d1d9">, </span><span style="color:#79c0ff">height</span><span style="color:#c9d1d9"> } </span><span style="color:#ff7b72">=</span><span style="color:#c9d1d9"> windowSize</span></span>
<span class="line"><span style="color:#c9d1d9">    figma.ui.</span><span style="color:#d2a8ff">resize</span><span style="color:#c9d1d9">(width, height)</span></span>
<span class="line"><span style="color:#c9d1d9">  })</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#d2a8ff">showUI</span><span style="color:#c9d1d9">({</span></span>
<span class="line"><span style="color:#c9d1d9">    width: </span><span style="color:#79c0ff">240</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">    height: </span><span style="color:#79c0ff">240</span></span>
<span class="line"><span style="color:#c9d1d9">  })</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p>To restrict the resize direction, set <code>options.resizeDirection</code> to either <code>horizontal</code> or <code>vertical</code>:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#d2a8ff">useWindowResize</span><span style="color:#c9d1d9">(onWindowResize, {</span></span>
<span class="line"><span style="color:#c9d1d9">  minWidth: </span><span style="color:#79c0ff">120</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">  maxWidth: </span><span style="color:#79c0ff">320</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">  resizeDirection: </span><span style="color:#a5d6ff">'horizontal'</span></span>
<span class="line"><span style="color:#c9d1d9">})</span></span></code></pre></div><p>The <code>useWindowResize</code> hook also supports toggling the UI window size on double-clicking the bottom and right edges of the UI window:</p><div data-rehype-pretty-code-fragment=""><pre data-language="ts"data-theme="default"><code data-language="ts"data-theme="default"><span class="line"><span style="color:#d2a8ff">useWindowResize</span><span style="color:#c9d1d9">(onWindowResize, {</span></span>
<span class="line"><span style="color:#c9d1d9">  minWidth: </span><span style="color:#79c0ff">120</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">  minHeight: </span><span style="color:#79c0ff">120</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">  maxWidth: </span><span style="color:#79c0ff">320</span><span style="color:#c9d1d9">,</span></span>
<span class="line"><span style="color:#c9d1d9">  maxHeight: </span><span style="color:#79c0ff">320</span><span style="color:#c9d1d9">,</span></span>
<span class="line line--highlighted"><span style="color:#c9d1d9">  resizeBehaviorOnDoubleClick: </span><span style="color:#a5d6ff">'minimize'</span></span>
<span class="line"><span style="color:#c9d1d9">})</span></span></code></pre></div><p>Setting <code>options.resizeBehaviorOnDoubleClick</code> to <code>minimize</code> means that the UI window will be set to the minimum size on double-click. Correspondingly, setting it to <code>maximize</code> means that the UI window will be set to the maximum size on double-click.</p><p>For a runnable example, try the <a href="https://github.com/yuanqing/create-figma-plugin/tree/main/packages/create-figma-plugin/templates/plugin/preact-resizable"target="_blank"><code>preact-resizable</code></a> plugin template:</p><div data-rehype-pretty-code-fragment=""><pre data-language="sh"data-theme="default"><code data-language="sh"data-theme="default"><span class="line"><span style="color:#c9d1d9">$ npx --yes create-figma-plugin --template plugin/preact-resizable</span></span></code></pre></div><h2 id="customizing-the-build">Customizing the build<a aria-hidden class="header-link"tabindex="-1"href="#customizing-the-build">#</a></h2><h3 id="customizing-the-underlying-esbuild-configuration">Customizing the underlying esbuild configuration<a aria-hidden class="header-link"tabindex="-1"href="#customizing-the-underlying-esbuild-configuration">#</a></h3><p>The <code>build-figma-plugin</code> CLI is powered by the <a href="https://esbuild.github.io"target="_blank">esbuild compiler</a>. To customize the underlying build configuration for the <a href="https://figma.com/plugin-docs/how-plugins-run/"target="_blank">main bundle</a>, create a <code>build-figma-plugin.main.js</code> file:</p><div data-rehype-pretty-code-fragment=""><pre data-language="js"data-theme="default"><code data-language="js"data-theme="default"><span class="line"><span style="color:#8b949e">// build-figma-plugin.main.js</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#79c0ff">module</span><span style="color:#c9d1d9">.</span><span style="color:#79c0ff">exports</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">=</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">buildOptions</span><span style="color:#c9d1d9">) {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#ff7b72">...</span><span style="color:#c9d1d9">buildOptions,</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p><code>buildOptions</code> is the original <a href="https://esbuild.github.io/api/#build-api"target="_blank">esbuild configuration object</a> used internally by the <code>build-figma-plugin</code> CLI. The exported function must return the new configuration object to be used.</p><p>Correspondingly, use a <code>build-figma-plugin.ui.js</code> file to customize the build configuration for the <a href="https://figma.com/plugin-docs/how-plugins-run/"target="_blank">UI bundle</a>.</p><h4 id="disabling-automatic-swapping-of-react-imports">Disabling automatic swapping of React imports<a aria-hidden class="header-link"tabindex="-1"href="#disabling-automatic-swapping-of-react-imports">#</a></h4><p>The <code>build-figma-plugin</code> CLI will detect and automatically swap out all <code>react</code> and <code>react-dom</code> imports with <a href="https://preactjs.com/guide/v10/switching-to-preact/"target="_blank"><code>preact/compat</code></a>. To disable this behaviour, create a <code>build-figma-plugin.ui.js</code> file:</p><div data-rehype-pretty-code-fragment=""><pre data-language="js"data-theme="default"><code data-language="js"data-theme="default"><span class="line"><span style="color:#8b949e">// build-figma-plugin.ui.js</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#79c0ff">module</span><span style="color:#c9d1d9">.</span><span style="color:#79c0ff">exports</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">=</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">buildOptions</span><span style="color:#c9d1d9">) {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#ff7b72">...</span><span style="color:#c9d1d9">buildOptions,</span></span>
<span class="line"><span style="color:#c9d1d9">    plugins: buildOptions.plugins.</span><span style="color:#d2a8ff">filter</span><span style="color:#c9d1d9">(</span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">plugin</span><span style="color:#c9d1d9">) {</span></span>
<span class="line"><span style="color:#c9d1d9">      </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> plugin.name </span><span style="color:#ff7b72">!==</span><span style="color:#c9d1d9"> </span><span style="color:#a5d6ff">'preact-compat'</span></span>
<span class="line"><span style="color:#c9d1d9">    })</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><h3 id="customizing-the-manifest-json-file">Customizing the <code>manifest.json</code> file<a aria-hidden class="header-link"tabindex="-1"href="#customizing-the-manifest-json-file">#</a></h3><p>To modify the <code>manifest.json</code> file just before it gets output by the <code>build-figma-plugin</code> CLI, create a <code>build-figma-plugin.manifest.js</code> file:</p><div data-rehype-pretty-code-fragment=""><pre data-language="js"data-theme="default"><code data-language="js"data-theme="default"><span class="line"><span style="color:#8b949e">// build-figma-plugin.manifest.js</span></span>
<span class="line"> </span>
<span class="line"><span style="color:#79c0ff">module</span><span style="color:#c9d1d9">.</span><span style="color:#79c0ff">exports</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">=</span><span style="color:#c9d1d9"> </span><span style="color:#ff7b72">function</span><span style="color:#c9d1d9"> (</span><span style="color:#ffa657">manifest</span><span style="color:#c9d1d9">) {</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  </span><span style="color:#ff7b72">return</span><span style="color:#c9d1d9"> {</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#ff7b72">...</span><span style="color:#c9d1d9">manifest,</span></span>
<span class="line"><span style="color:#c9d1d9">    </span><span style="color:#8b949e">// ...</span></span>
<span class="line"><span style="color:#c9d1d9">  }</span></span>
<span class="line"><span style="color:#c9d1d9">}</span></span></code></pre></div><p>The exported function receives the original <code>manifest.json</code> that’s created by the <code>build-figma-plugin</code> CLI, and must return the new <code>manifest.json</code> plain object to be output.</p></div><ul class="pagination"><li class="pagination__previous"><a href="/create-figma-plugin/utilities/">Utilities</a></li><li class="pagination__next"><a href="/create-figma-plugin/reference-plugins-and-widgets/">Reference plugins/widgets</a></li></ul></div></main><script src="/create-figma-plugin/script.js"></script><script>var sc_project=12531644,sc_invisible=1,sc_security="95d0263e"</script><script async src="https://www.statcounter.com/counter/counter.js"></script><noscript><img src="https://c.statcounter.com/12531644/0/95d0263e/1/"alt=""></noscript></body></html>